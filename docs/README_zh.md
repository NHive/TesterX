# TesterX

**TesterX**：AI 驱动的自动化 API 测试引擎，为现代软件开发保驾护航

TesterX 是一款由人工智能驱动的自动化 API 测试引擎，旨在根据 OpenAPI 规范智能生成全面、高效的 API
测试用例，从而显著提升现代软件开发中的质量保证效率和可靠性。TesterX 充分利用大型语言模型（LLM）的强大能力，不仅能够理解 API
接口的功能和业务逻辑，还能自动生成各种类型的测试用例，包括功能测试、边界测试、场景测试以及异常测试等，帮助开发团队快速发现和修复潜在的缺陷，确保交付高质量的软件产品。

## 语言选择

- [English](../README.md)

## 🌟 核心特性

- **🤖 基于 LLM 的智能测试用例生成**：

  - 利用先进的自然语言处理和理解技术，深入分析 OpenAPI 规范，智能推断 API 的业务语义和数据结构。
  - 自动生成全面且高质量的测试用例，覆盖各种测试场景，极大地减少手动编写测试用例的工作量。

- **📚 全面支持 OpenAPI 3.1.x 规范**：

  - 无缝对接 OpenAPI 3.1.x 规范，兼容 JSON 和 YAML 格式的规范文件。
  - 确保与最新的 API 规范标准同步，为现代 API 开发提供强大的测试支持。

- **🎯 自动生成业务场景测试用例**：

  - 超越简单的接口测试，能够理解和模拟真实的业务流程，自动生成跨多个 API 接口的复杂业务场景测试用例。
  - 帮助开发者验证 API 在实际业务场景中的正确性和稳定性。

- **📊 集成 Allure 测试报告**：

  - 无缝集成流行的 Allure 测试报告框架，生成美观、详细的测试报告。
  - 提供丰富的测试执行数据可视化，帮助团队快速定位问题和分析测试结果。

- **⚡ 基于 pytest 的高性能测试执行**：

  - 采用轻量级且功能强大的 pytest 测试框架作为测试执行器，确保测试用例的高效稳定运行。
  - 支持灵活的测试用例组织和执行方式，方便集成到现有的开发和 CI/CD 流程中。

- **🔄 测试用例的自动维护和更新**：

  - 能够监控 API 规范的变化，智能分析变更对测试用例的影响，并自动更新和维护测试用例。
  - 降低测试用例维护成本，确保测试用例始终与最新的 API 定义保持同步。

## 🚀 快速开始

只需简单的几步，即可开始使用 TesterX 为您的 API 自动生成和执行测试：

1. **准备 OpenAPI 规范文件**：

   - 确保您已准备好符合 OpenAPI 3.1.x 规范的 API 描述文件，支持 JSON 或 YAML 格式。

2. **安装 TesterX**

3. **运行测试用例生成命令**：

   ```bash
   testerx add_api_docs --spec_path api-spec.json
   ```

   - 使用 `add_api_docs` 子命令将您的 OpenAPI 规范文件添加到 TesterX 的知识库中。`api-spec.json` 替换为您的 OpenAPI
     规范文件路径。

4. **生成测试用例**：

   ```bash
   testerx generate_testcase --requirements "针对用户注册和登录接口生成全面的测试用例"
   ```

   - 使用 `generate_testcase` 子命令，并提供测试需求描述，TesterX 将基于知识库和需求智能生成测试用例。
     您可以根据需要修改需求描述以生成不同类型的测试用例。

5. **执行测试**：

   ```bash
   testerx run
   ```

   - 运行 `run` 命令以执行所有生成的测试用例。TesterX 将自动执行测试，并生成详细的测试报告。

## 📂 项目结构概览

### 目录详解

- **`projects/` 目录**：

  - 用于存放各个测试项目的数据，这些数据由 AI 引擎分析 OpenAPI 规范后自动生成。
  - 包括：
    - API 接口功能描述
    - 请求/响应数据结构
    - 业务规则定义
    - 测试数据模板

- **`testcases/` 目录**：

  - 存放 TesterX 自动生成的测试用例。
  - 分为两类：
    - `api_tests/`：针对单个 API 接口的基础功能测试、边界测试等用例。
    - `scenarios/`：模拟真实业务流程的场景集成测试用例，例如用户注册登录流程、订单创建支付流程等。

- **`testerx/` 目录**：

  - TesterX 项目的核心源代码目录。
  - 包含关键模块：
    - 测试用例生成引擎 (`testerx/run/generate.py` 等)
    - OpenAPI 规范解析器 (`testerx/run/openapi_parser.py` 等)
    - 测试执行器 ( `testerx/run/test_executor.py` 等)
    - 工具类库 ( `testerx/utils/common_utils.py` 等)

## ⚙️ 工作原理

TesterX 的核心工作流程如下：

1. **OpenAPI 规范解析**：

   - TesterX 首先解析用户提供的 OpenAPI 规范文件（JSON/YAML 格式），提取 API 接口的详细信息，包括接口路径、请求方法、请求参数、请求体、响应结构、安全认证方式等。
   - 利用 OpenAPI 规范解析器 (`testerx/run/openapi_parser.py`) 将规范文档转换为内部数据结构，方便后续的分析和处理。

2. **LLM 业务语义和数据结构分析**：

   - TesterX 的智能引擎 (位于 `tools/` 目录下) 利用大型语言模型（LLM），例如 Qwen2.5-Coder (后续考虑离线部署)，对解析后的
     API 接口信息进行深度的业务语义和数据结构分析。
   - 理解每个 API 接口的功能描述、参数的含义、数据类型、业务规则和约束等，为后续的测试用例生成提供智能支持。

3. **智能测试用例生成**：

   - 基于对 API 业务语义和数据结构的理解，TesterX 的测试用例生成引擎 ( `testerx/run/generate.py`) 智能生成全面的测试用例，覆盖多种测试类型：
     - **基础功能测试**：验证 API 接口的基本功能是否符合预期，例如请求成功/失败、数据增删改查等。
     - **参数边界测试**：针对 API 接口的参数，生成边界值、等价类、异常值等测试用例，验证接口对各种参数值的处理能力和鲁棒性。
     - **业务场景测试**：模拟真实用户的业务操作流程，生成跨多个 API 接口的场景测试用例，例如用户注册-\>登录-\>获取用户信息-\>修改用户信息等完整流程的测试。
     - **异常情况测试**：针对各种异常情况，例如网络错误、服务器错误、权限不足、数据冲突等，生成相应的测试用例，验证 API
       接口的异常处理能力和错误提示是否合理。

4. **测试执行与详细报告生成**：

   - TesterX 使用 pytest 测试框架作为测试执行器 ( `testerx/run/test_executor.py`) 来执行生成的测试用例。
   - 自动构建测试执行环境，加载测试用例，并按照 pytest 的规则执行测试。
   - 在测试执行过程中，记录详细的测试日志和结果。
   - 测试执行完成后，TesterX 集成 Allure 报告框架，根据测试结果和日志生成美观、易于理解的详细测试报告 (
     位于 `reports/allure/` 目录下)。
   - 测试报告包括测试用例的执行状态、通过率、失败用例详情、错误日志、测试步骤、性能指标等，帮助用户全面了解 API 的测试情况。

## ⏳ 项目进度

- ✅ **已完成**

  - OpenAPI 规范解析基础功能实现
  - curl 命令生成与验证功能完成

- 🚧 **正在进行中**

  - 记忆系统基础框架搭建 (用于存储和管理 API 知识库)
  - 测试代码生成引擎开发 (基于模板和 AI 的测试代码生成)
  - 变更监控基础能力开发 (监控 API 规范变更)
  - 对话交互原型构建 (用户通过对话方式与 TesterX 交互)
  - 智能参数推断功能添加 (AI 智能推断测试参数)

- 🚀 **计划中**

  - 跨接口场景测试实现 (支持复杂业务场景测试)
  - 完善测试执行引擎 (提升测试执行效率和稳定性)
  - CI/CD 集成能力添加 (方便集成到持续集成/持续交付流水线)
  - 监控仪表盘开发 (可视化展示测试结果和项目状态)
  - 使用文档编写 (提供完善的用户使用指南)

### 🚧 当前工作状态

TesterX 项目正处于积极开发阶段，核心功能正在逐步完善中。目前已完成 OpenAPI 规范解析和 curl
命令生成等基础功能，为后续的智能测试用例生成和执行奠定了基础。虽然项目尚在开发中，但我们致力于尽快使其达到可用标准，并持续迭代和优化，敬请期待。

### 🔮 后续工作展望

- **更强大的 AI 引擎**：

  - 持续优化和微调 LLM 模型，例如 Qwen2.5-Coder，提升 API 语义理解和测试用例生成能力。
  - **争取实现 LLM 模型的离线部署**，减少对第三方 API 的依赖，提高系统的稳定性和安全性，并降低使用成本。

- **更智能的测试策略**：

  - 探索和应用更先进的 AI 技术，例如强化学习、生成对抗网络等，实现更智能化的测试策略，例如自动探索 API 的潜在缺陷、自动优化测试用例集等。

- **更丰富的扩展能力**：

  - 提供更丰富的插件和扩展机制，方便用户根据自身需求定制和扩展 TesterX 的功能，例如支持更多的测试报告格式、集成更多的第三方工具、支持自定义测试用例生成模板等。

## 💡 使用示例

以下示例演示了如何使用 TesterX 进行 API 测试：

好的，请您稍等，我将根据您的指示修改 “使用示例” 部分，使其更贴合您描述的实际操作流程。修改后的 “使用示例” 步骤将调整为先修改 `config_example.py` 文件并重命名为 `config.py`，然后再进行后续操作。

以下是修改后的 **使用示例** 部分：

## 💡 使用示例

以下示例演示了如何使用 TesterX 进行 API 测试：

### 1\. 配置项目 (修改 `config_example.py` 并重命名为 `config.py` )

在您的项目根目录下，您会找到一个 `config_example.py` 文件。请按照以下步骤配置您的项目：

- **打开 `config_example.py` 文件**：使用文本编辑器打开 `config_example.py` 文件。

- **修改配置信息**：根据您的实际 API 环境，修改以下配置项：

  ```python
      API_INFO = {
          "OHMYGPT": {
              "KEY": "sk-*",
              "BASE_URL": "https://c-z0-api-01.hash070.com/v1"
          },
          "TXYUN": {
              "KEY": "sk-*",
              "BASE_URL": "https://api.lkeap.cloud.tencent.com/v1"
          }
      }

      EMBEDDING_MODEL = {"format": "openai", "provider": "OHMYGPT", "model": "text-embedding-3-small", }
      CHAT_MODEL = {"format": "openai", "provider": "OHMYGPT", "model": "gpt-4o"}
  ```

  请务必将 `BASE_URL` 替换为您实际要测试的 API 服务的根地址。

- **重命名为 `config.py`**：修改完成后，将 `config_example.py` 文件重命名为 `config.py`。TesterX 将会读取 `config.py` 文件中的配置信息。

### 2\. 添加 OpenAPI 规范到知识库

```bash
testerx add_api_docs --spec_path ./config.json
```

- 使用 `add_api_docs` 命令，通过项目配置文件，将 OpenAPI 规范添加到 TesterX 的知识库中。

### 3\. 生成测试用例

```bash
# 生成 API 单接口测试用例 (基于知识库和默认策略)
testerx generate_testcase --requirements "生成所有 API 接口的基础功能测试用例"

# 生成业务场景测试用例 (例如：用户注册登录场景)
testerx generate_testcase --requirements "模拟用户注册和登录的完整业务流程，生成场景测试用例"
```

- 使用 `generate_testcase` 命令，并提供不同的需求描述，生成不同类型的测试用例。TesterX 将根据需求和知识库中的 API
  信息智能生成测试用例。

### 4\. 执行测试

```bash
# 执行所有生成的测试用例
testerx run

# 执行指定场景的测试用例 (例如：login_flow 场景)
testerx run --scenario login_flow

# 执行指定 API 接口的测试用例 (例如：user_login 接口)
testerx run --api user_login
```

- 使用 `run` 命令执行测试用例。
  - 不加任何参数时，默认执行所有已生成的测试用例。
  - 使用 `--scenario` 参数指定执行特定场景的测试用例。
  - 使用 `--api` 参数指定执行特定 API 接口的测试用例。

### 5\. 生成和查看测试报告

```bash
# 生成 Allure 测试报告 (默认在 reports/allure 目录下)
testerx report

# 启动 Allure 服务，在浏览器中查看测试报告
allure serve reports/allure
```

- 使用 `report` 命令生成 Allure 测试报告。
- 使用 `allure serve` 命令启动 Allure 服务，并在浏览器中打开测试报告，详细分析测试结果。

## 📜 许可证

本项目采用 Apache-2.0 许可证 - 详见 [LICENSE](LICENSE) 文件

---

**感谢您的关注和使用 TesterX！** 如果您有任何问题、建议或贡献，欢迎通过 GitHub 仓库提交 Issue 或 Pull
Request。让我们一起打造更智能、更高效的 API 测试工具！
